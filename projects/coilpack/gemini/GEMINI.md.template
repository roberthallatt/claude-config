# Project: {{PROJECT_NAME}}

## Project Overview
This is a **Coilpack** project combining ExpressionEngine CMS with Laravel framework using Twig templating.

- **Primary URL**: {{PRIMARY_URL}}
- **Control Panel**: {{CONTROL_PANEL_URL}}
- **Environment**: DDEV local development

## Tech Stack

### Core Technologies
- **CMS**: ExpressionEngine 7.x with Coilpack
- **Framework**: Laravel 10.x/11.x
- **Templating**: Twig (`.html.twig` files)
- **PHP Version**: {{PHP_VERSION}}
- **Database**: {{DATABASE_TYPE}}

### Frontend
- **CSS Framework**: Tailwind CSS
- **Build Tool**: Vite
- **JavaScript**: Alpine.js for interactivity
- **Components**: Livewire (if installed)

### Localization
- **Languages**: English (EN), French (FR)
- **Translation System**: Laravel localization (`lang/en/`, `lang/fr/`)

## Directory Structure

```
{{PROJECT_NAME}}/
├── app/                    # Laravel application code
│   ├── Http/Controllers/   # Laravel controllers
│   ├── Models/             # Eloquent models
│   ├── Livewire/           # Livewire components
│   └── View/Components/    # Blade/Twig components
├── ee/                     # ExpressionEngine installation
│   └── system/user/
│       ├── addons/         # EE add-ons
│       ├── config/         # EE configuration
│       └── templates/      # Twig templates
│           └── default_site/
├── resources/
│   ├── views/              # Blade views (Livewire)
│   ├── css/                # Source CSS
│   └── js/                 # Source JavaScript
├── routes/                 # Laravel routes
├── lang/                   # Translation files
│   ├── en/
│   └── fr/
├── public/                 # Web root (docroot)
└── .ddev/                  # DDEV configuration
```

## Coding Standards

### PHP
- Follow PSR-12 coding standards
- Use type hints for all function parameters and return types
- Prefer dependency injection over facades
- Use meaningful variable and method names

### Twig Templates
- Use snake_case for template file names
- Prefer `{% include %}` for reusable partials
- Use `{% extends %}` for layout inheritance
- Access EE data via `exp.channel.entries()`, not legacy tags

### CSS/Tailwind
- Use Tailwind utility classes, avoid custom CSS when possible
- Follow mobile-first responsive design
- Use semantic class names for custom components

### JavaScript
- Use Alpine.js for simple interactivity
- Prefer `x-data` components over vanilla JS
- Use Livewire for complex server interactions

## Development Commands

### DDEV Commands
```bash
# Start environment
ddev start

# Access container shell
ddev ssh

# Run artisan commands
ddev artisan <command>

# Run EE CLI commands
ddev ee <command>

# Build frontend assets
ddev npm run dev
ddev npm run build
```

### Common Tasks
```bash
# Clear all caches
ddev artisan cache:clear
ddev artisan config:clear
ddev artisan view:clear
ddev ee cache:clear

# Run database migrations
ddev artisan migrate

# Sync EE templates
ddev ee sync:template
```

## Template Patterns

### Accessing Channel Entries
```twig
{% for entry in exp.channel.entries({channel: 'pages', url_title: segment_2}) %}
    <h1>{{ entry.title }}</h1>
    {{ entry.body|raw }}
{% endfor %}
```

### Bilingual Content
```twig
{% set locale = app.getLocale() %}
{% if locale == 'fr' %}
    {{ entry.body_fr|raw }}
{% else %}
    {{ entry.body|raw }}
{% endif %}

{# Or use Laravel translations #}
{{ __('messages.welcome') }}
```

### File Fields
```twig
{% if entry.featured_image.url %}
    <img src="{{ entry.featured_image.url }}" 
         alt="{{ entry.featured_image.title }}"
         width="{{ entry.featured_image.width }}"
         height="{{ entry.featured_image.height }}">
{% endif %}
```

## Important Notes

1. **Always use `ddev` prefix** for CLI commands (artisan, ee, npm, composer)
2. **Template location**: `ee/system/user/templates/default_site/`
3. **Translations**: Use Laravel's `__()` helper for UI strings
4. **Cache clearing**: Clear both Laravel and EE caches after changes
5. **URL Structure**: EE handles routing via template groups

## External Resources

@./docs/coilpack-reference.md
@./docs/ee-field-types.md
